{# This file is part of INGInious. See the LICENSE and the COPYRIGHTS files for #}
{# more information about the licensing of this file. #}
<div class="row">
    <div class="col-sm-3">
        <div id="variable_list_container" class="text-center">
            <h3>{{ _("Variables") }}</h3>
            {% set judges = environments[task_data.environment_type] %}
            {% set selected_judge = namespace() %}
            {% for judge in judges %}
                {% if judge[0] == task_data.get("environment_id", "") %}
                    {% set selected_judge.name = judge[0] %}
                    {% set selected_judge.variables = judge[1] %}
                {% endif %}
            {% endfor %}
            {% if selected_judge.variables | length == 0 %}
                <p class="font-italic" id="no_variable_message">{{ _("No variables for this exercise") }}</p>
            {% endif %}
            <div class="list-group" id="variable_list" role="tablist">    
                {% for variable in selected_judge.variables %}
                    <a class="list-group-item list-group-item-action" data-toggle="list" href="#{{ variable[0] }}" role="tab">{{ variable[0] }}</a>
                {% endfor %}
            </div> 
        </div>
    </div>

    <div class="col-sm-9">
        <div id="tab-container" class="tab-content">
            {% for variable in selected_judge.variables %}
                <div class="tab-pane" id="{{variable[0]}}" role="tabpanel">
                    <div class="form-group row">
                        <label for="name" class="col-sm-2 control-label">{{ _("Name") }}</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="variable_name" name="variable[{{variable[0]}}][variable_name]" placeholder="name for this variable" value="{{ variable[0] }}">
                        </div>
                    </div>
            
                    <div class="form-group row">
                        <label for="name" class="col-sm-2 control-label">{{ _("Description") }}</label>
                        <div class="col-sm-10">
                            <textarea id="variable_description_{{variable[0]}}" class="form-control code-editor" name="variable[{{variable[0]}}][variable_description]" data-x-language="rst" data-x-lines="10">{{variable[1]}}</textarea>
                        </div>
                    </div>
            
                    <div class="form-group row">
                        <label for="name" class="col-sm-2 control-label">{{ _("Value") }}</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="variable_value_{{variable[0]}}" name="variable[{{variable[0]}}][variable_value]" placeholder="value for this variable" value="{{ task_data.get('variables', {}).get(variable[0], {}).get('variable_value', variable[2]) }}">
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</div>